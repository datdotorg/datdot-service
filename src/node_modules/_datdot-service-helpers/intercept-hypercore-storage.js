module.exports = function intercept (feed, { putData, getData }) {
  // feed.oplog.storage
  const storage = feed.core.blocks
  const _putData = storage.put
  const _getData = storage.get

  storage.put = async function monkeyPutData (i, data, offset) {
    // return this._write(offset, data)
    return putData(i, data, offset)
  }

  storage.get = async function monkeyGetData (i) {
    // const [offset, size] = await this.tree.byteRange(2 * i)
    // return this._read(offset, size)
    return getData(index)
  }

  function unintercept () {
    storage.put = _putData
    storage.get = _getData
  }

  return unintercept
}
