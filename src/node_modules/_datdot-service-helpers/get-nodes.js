const tree = require('flat-tree')

module.exports = get_nodes

async function get_nodes (feed, index, version) {
  return new Promise(async (resolve, reject) => {
    const all = []
    const roots = await feed.core.tree.roots
    const proof = await feed.core.tree.get(32)
    console.log({ roots, proof })
    all.push(...roots, proof)
    resolve(all)
  })
}

function get_proof_nodes (feed, index) {
  return new Promise((resolve, reject) => {
    feed.proof(index, (err, res) => {
      if (err) reject(err)
      resolve(res.nodes)
    })
  })
}

function get_node (feed, index) {
  feed.core.tree.get(index)
}