module.exports = hypercore_replicated

function hypercore_replicated (feed) {
  return new Promise(function (resolve, reject) {
    function onupdate (err, result) {
      if (err && err.message !== 'No update available from peers') reject(err)
      else resolve()
    }
    feed.ready(function () {
    if (feed.writable) resolve()
    if (feed.peers.length) {
      feed.update({ ifAvailable: true }, onupdate)
    } else {
      feed.once('peer-add', function () {
        feed.update({ ifAvailable: true }, onupdate)
      })
    }
    })
  })
}